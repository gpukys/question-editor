(this["webpackJsonpquestion-editor"]=this["webpackJsonpquestion-editor"]||[]).push([[0],{116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(13),i=n.n(a),r=(n(116),n(14)),l=n(151),o=n(18),j=(n(117),n(28)),u=n(12),b=n(1),d=(n(118),n(38)),O=(n(119),n(3)),h=function(e){var t=Object(c.useState)(e.data||{}),n=Object(r.a)(t,2),a=n[0],i=n[1],j=Object(c.useState)(e.correctAnswers||[]),h=Object(r.a)(j,2),f=h[0],x=h[1],m=Object(c.useState)(a.question||""),p=Object(r.a)(m,2),v=p[0],g=p[1],N=Object(c.useState)(!1),w=Object(r.a)(N,2),A=w[0],C=w[1];Object(c.useEffect)((function(){console.log(e),i(e.data),x(e.correctAnswers)}),[]);var S=function(){return C(!1)},q=function(e){console.log(e),x([parseInt(e.target.value)])},k=function(e){var t=parseInt(e.target.value),n=f.findIndex((function(e){return e===t}));x(n>-1?f.filter((function(e){return e!==t})):[].concat(Object(d.a)(f),[t]))},I=function(e){return f.includes(e)},M=function(e){var t=Object(u.a)({},a),n=t.answers[f[0]];if(t.answers.splice(e,1),i(t),a.multiple)x(f.filter((function(t){return t!==e})));else{var c=t.answers.findIndex((function(e){return e===n}));c>-1?x([c]):t.answers.length>0?x([0]):x([])}};return Object(O.jsxs)(s.a.Fragment,{children:[Object(O.jsx)("div",{className:"item",onClick:function(){return C(!0)},children:a.question}),Object(O.jsxs)(l.c,{icon:"info-sign",onClose:S,title:"Edit question",isOpen:A,canOutsideClickClose:!1,canEscapeKeyClose:!1,children:[Object(O.jsxs)("div",{className:b.a.DIALOG_BODY,children:[Object(O.jsx)("h2",{children:Object(O.jsx)(l.d,{alwaysRenderInput:!0,placeholder:"Edit question",value:v,onChange:function(e){g(e)},className:"full-width"})}),a.multiple?Object(O.jsxs)("div",{className:"m-0",children:[Object(O.jsx)("label",{className:"bp3-label",children:"Answers"}),a.answers.map((function(e,t){return Object(O.jsxs)("div",{className:"flex fd-row jc-sb ai-base gap-16",children:[Object(O.jsx)(l.b,{label:e,value:t,checked:I(t),onChange:k}),Object(O.jsx)(l.k,{content:Object(O.jsx)("span",{children:"Delete answer"}),children:Object(O.jsx)(l.a,{intent:o.a.DANGER,onClick:function(){return M(t)},children:Object(O.jsx)(l.f,{icon:"trash"})})})]})}))]}):Object(O.jsxs)("div",{onChange:q,selectedValue:f&&f[0],className:"flex fd-col",children:[Object(O.jsx)("label",{className:"bp3-label",children:"Answers"}),a.answers.map((function(e,t){return Object(O.jsxs)("div",{className:"flex fd-row jc-sb ai-base gap-16",children:[Object(O.jsx)(l.h,{label:e,value:t,name:"smth",checked:I(t),onChange:q}),Object(O.jsx)(l.k,{content:Object(O.jsx)("span",{children:"Delete answer"}),children:Object(O.jsx)(l.a,{intent:o.a.DANGER,onClick:function(){return M(t)},children:Object(O.jsx)(l.f,{icon:"trash"})})})]})}))]}),Object(O.jsx)("input",{className:"".concat(b.a.INPUT," m-b-16 m-t-16"),placeholder:"New answer",onKeyPress:function(e){if(13===e.which&&e.target.value){var t=Object(u.a)({},a),n=t.answers.push(e.target.value);i(t),x(a.multiple?[].concat(Object(d.a)(f),[n-1]):[n-1])}}}),Object(O.jsx)(l.e,{label:"Multiple?",labelFor:"multiple",children:Object(O.jsx)(l.i,{id:"multiple",checked:a.multiple,onChange:function(e){i(Object(u.a)(Object(u.a)({},a),{},{multiple:!a.multiple})),x([0])}})})]}),Object(O.jsx)("div",{className:b.a.DIALOG_FOOTER,children:Object(O.jsxs)("div",{className:b.a.DIALOG_FOOTER_ACTIONS,children:[Object(O.jsx)(l.a,{intent:o.a.PRIMARY,onClick:function(){x(f.sort()),a.question=v,e.onSaveChanges(a,f),S()},children:"Save"}),Object(O.jsx)(l.a,{onClick:S,children:"Close"})]})})]})]})},f=function(e){e.selectedMode;var t=e.json,n=Object(c.useState)({tresholdPercentage:75,numberOfQuestions:0,maxAttemptsNumber:3,strictAttemptsMode:!1,questions:[],answers:[]}),s=Object(r.a)(n,2),a=s[0],i=s[1];Object(c.useEffect)((function(){if(t){var e=JSON.parse(t);i(Object(u.a)(Object(u.a)({},e.public),{},{answers:e.answers}))}}),[t]);var d=a.questions.map((function(e,t){return Object(O.jsxs)("div",{className:"flex fd-row jc-sb ai-base",children:[Object(O.jsx)(h,{data:e,correctAnswers:a.answers[t],onSaveChanges:(n=t,function(e,t){var c=Object(u.a)({},a);c.questions[n]=e,c.answers[n]=t.map((function(e){return parseInt(e)})),i(c)})},e.question),Object(O.jsx)(l.k,{content:Object(O.jsx)("span",{children:"Delete question"}),children:Object(O.jsx)(l.a,{intent:o.a.DANGER,onClick:function(){return f(t)},children:Object(O.jsx)(l.f,{icon:"trash"})})})]});var n})),f=function(e){var t=Object(u.a)({},a);t.questions.splice(e,1),t.answers.splice(e,1),i(t)},x=function(e,t){i("strictAttemptsMode"!==t?Object(u.a)(Object(u.a)({},a),{},Object(j.a)({},t,parseInt(e.target.value))):Object(u.a)(Object(u.a)({},a),{},{strictAttemptsMode:!a.strictAttemptsMode}))};return Object(O.jsxs)("div",{className:"flex fd-col ai-center gap-16",children:[Object(O.jsxs)("div",{className:"flex fd-row gap-16",children:[Object(O.jsx)(l.e,{label:"Treshold Percentage",labelFor:"treshold",children:Object(O.jsx)(l.g,{id:"treshold",value:a.tresholdPercentage,onChange:function(e){return x(e,"tresholdPercentage")},type:"number"})}),Object(O.jsx)(l.e,{label:"No. of Questions",labelFor:"questions",children:Object(O.jsx)(l.g,{id:"questions",disabled:!0,value:a.questions.length,type:"number"})}),Object(O.jsx)(l.e,{label:"Max No. of Attempts",labelFor:"attempts",children:Object(O.jsx)(l.g,{id:"attempts",onChange:function(e){return x(e,"maxAttemptsNumber")},value:a.maxAttemptsNumber,type:"number"})}),Object(O.jsx)(l.k,{content:a.strictAttemptsMode?"Must get atleast ".concat(a.tresholdPercentage,"% for the score to register"):"No restriction",children:Object(O.jsx)(l.e,{label:"Strict Mode",labelFor:"strict",children:Object(O.jsx)(l.i,{id:"strict",checked:a.strictAttemptsMode,onChange:function(e){return x(e,"strictAttemptsMode")}})})})]}),Object(O.jsx)("div",{className:"questions",children:d}),Object(O.jsx)("input",{className:"".concat(b.a.INPUT," m-b-16 m-t-16"),placeholder:"New question",onKeyPress:function(e){if(13===e.which&&e.target.value){var t=Object(u.a)({},a);t.questions.push({question:e.target.value,answers:[],multiple:!1}),t.answers.push([]),i(t)}}}),Object(O.jsx)(l.a,{intent:o.a.PRIMARY,onClick:function(){var e={public:Object(u.a)(Object(u.a)({},a),{},{answers:void 0}),answers:a.answers};e.public.numberOfQuestions=a.questions.length,console.log(JSON.stringify(e))},children:"Export JSON"})]})},x=(n(146),function(e){var t=e.onSubmit,n=Object(c.useState)(""),s=Object(r.a)(n,2),a=s[0],i=s[1];return Object(O.jsxs)("div",{className:"container flex fd-col ai-center",children:[Object(O.jsx)(l.j,{className:"main-input",large:!0,intent:o.a.PRIMARY,onChange:function(e){i(e.target.value)},value:a}),Object(O.jsx)(l.a,{intent:o.a.PRIMARY,onClick:function(){try{JSON.parse(a),t(a)}catch(e){alert("Invalid JSON")}},children:"Save"})]})});var m=function(){var e=Object(c.useState)(1),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(null),j=Object(r.a)(i,2),u=j[0],b=j[1];function d(e){u&&!window.confirm("You have unsaved changes. Leave?")||(b(null),a(e))}return Object(O.jsxs)(s.a.Fragment,{children:[Object(O.jsxs)("header",{className:"flex fd-col ai-center",children:[Object(O.jsx)("h1",{children:"RS School Question editor"}),Object(O.jsxs)("div",{className:"control-container flex ai-center",children:[Object(O.jsx)(l.a,{intent:o.a.PRIMARY,onClick:function(){return d(1)},children:"Create new question set"}),Object(O.jsx)("span",{children:"OR"}),Object(O.jsx)(l.a,{onClick:function(){return d(2)},children:"Import JSON"})]})]}),Object(O.jsxs)("section",{className:"flex fd-col ai-center fg-2",children:[1===n&&Object(O.jsx)(f,{selectedMode:n,json:u}),2===n&&Object(O.jsx)(x,{onSubmit:function(e){a(1),b(e)}})]})]})};i.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(m,{})}),document.getElementById("root"))}},[[147,1,2]]]);
//# sourceMappingURL=main.ee038b2c.chunk.js.map